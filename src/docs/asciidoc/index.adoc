= Natural sort for Elasticsearch
Jörg Prante
Version 1.0
:sectnums:
:toc: preamble
:toclevels: 4 														
:!toc-title: Content
:experimental:
:description: Natural sort for Elasticsearch
:keywords: Elasticsearch, Plugin, Natural sort

The following text gives an introduction on how to use natural sort plugin
after installed in Elasticsearch.

== Example for Elasticsearch 5.x

This example is encode in `Sense` syntax.

[source]
----

PUT /_test
{
  "mappings" : {
    "type1" : {
      "properties" : {
        "points" : {
          "type" : "text",
          "store" : true,
          "fields" : {
            "sort" : {
              "type" : "text",
              "fielddata" : true,
              "analyzer" : "naturalsort"
            }
          }
        }
      }
    }
  }
}

PUT /test/doc/1
{
  "points" :  "Bob: 2 points"
}

PUT /test/doc/2
{
  "points" : "Bob: 3 points"
}

PUT /test/doc/3
{
  "points" : "Bob: 10 points"
}

POST /test/_search
{
   "fields" : "points",
   "query": {
       "match_all" : {}
    },
    "sort" : {
            "points.sort" : {
                 "order" : "asc"
            }
    }
}
----

Response

[source]
----
{
  "took" : 54,
  "timed_out" : false,
  "_shards" : {
    "total" : 2,
    "successful" : 2,
    "failed" : 0
  },
  "hits" : {
    "total" : 3,
    "max_score" : null,
    "hits" : [ {
      "_index" : "test",
      "_type" : "type1",
      "_id" : "Ono1C2F7SdWBPL6QRAGA6Q",
      "_score" : null,
      "fields" : {
        "points" : "Bob: 2 points"
      },
      "sort" : [ "*\u0018䀊䀀。ᰁက挀㄀ᜀఠٰ̰\u0000\u0002\u0001\u0000䀀‎瀀ࠀЁ渀Ā@ \u0010\b\u0000\u0004\u0001\u0000䀀 ကࠀЀȀĀ@ \u0001" ]
    }, {
      "_index" : "test",
      "_type" : "type1",
      "_id" : "J5EornIuRKCy7_G084eyoQ",
      "_score" : null,
      "fields" : {
        "points" : "Bob: 3 points"
      },
      "sort" : [ "*\u0018䀊䀀。ᰁሀ挀㄀ᜀఠٰ̰\u0000\u0002\u0001\u0000䀀‎瀀ࠀЁ渀Ā@ \u0010\b\u0000\u0004\u0001\u0000䀀 ကࠀЀȀĀ@ \u0001" ]
    }, {
      "_index" : "test",
      "_type" : "type1",
      "_id" : "yHWy94jPTHqULtgSZvvysw",
      "_score" : null,
      "fields" : {
        "points" : "Bob: 10 points"
      },
      "sort" : [ "*\u0018䀊䀀。 ฀䘀ㆀᢀ஀̸ؐƘ\u0000\u0001\u0000䀀 ဇ㠀ЀȀĀ㮀@ \u0010\b\u0004\u0002\u0000\u0001\u0000 ကࠀЀȀĀ@ \u0010\b\u0004\u0001" ]
    } ]
  }
}
----
